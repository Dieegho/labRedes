\documentclass[spanish]{udpreport}
\usepackage[utf8]{inputenc}
\usepackage[spanish]{babel}

% Podemos establecer el logo de alguna entidad o dejar el de la UDP (defecto)
%\setlogo{EITFI}

\title{Informe Laboratorio III \\ Redes de Datos}
\author{Arturo Mantinetti \\ Manuel Tobar \\ Diego Vilches \\ Nicolas Henriquez}
\email{arturo.mantinetti@mail.udp.cl \\ manuel.tobar@mail.udp.cl
	\\ diego.vilches@mail.udp.cl \\ nicolas.henriquez@mail.udp.cl}
	
\profesor{Profesor \\ Jaime Álvarez}
\ayudante{Ayudante \\ Maximiliano Vega}


\date{10 de Abril de 2016} %Cambie la fecha de 8 a 10 no se si importe (?) - Manuel

% Además podemos establecer la facultad y escuela
% los valores por defecto son los siguientes:
%\udpschool{Escuela de Informática y Telecomunicaciones}
%\udpfaculty{Facultad de Ingeniería}
%\udpuniversity{Universidad Diego Portales}

\begin{document}
\maketitle

\tableofcontents

\chapter{Introducción}

%metanle caca cabros atte. diego
%corrijan mi caca
%recuerden que siempre se habla en tercera persona
%saludos
Este laboratorio consistió en crear paquetes de datos con diferentes parámetros para luego enviarlos por la red, con el fin lo lograr comprender como se conforman y comportan estos según sus características. Esto es posible gracias a un programa llamado 'Scapy' que nos da esas funcionalidades. 

Los paquetes, en este experimento, varían principalmente en la dirección MAC, lo que hace que sean recibidos por distintos equipos. Para esto se ocupa 'Wireshark', programa con el que se puede capturar los paquetes enviados por la red.  Una vez creados y enviados los paquetes a través del Switch, se repite el procedimiento, sólo que esta vez los equipos están conectados a un Hub. 

%Ahi modifique un poco la mierda, pero falta agregar. atte: Manuel


\chapter{Contenido}

\section{Creación de Paquetes}
Para crear un paquete con Scapy, este se tiene que ejecutar vía la consola el siguiente comando:
%Alguna forma bonita de mostrar el comando - Manuel
\begin{center}
	\emph{sudo scapy}
\end{center}

Este comando iniciara el programa como super-user donde se podrá usar sus funciones para la creación de los paquetes y enviarlos por la red. Estos se crean en base a las capas del modelo OSI, sin necesidad de seguir un orden especifico al crear las capas, las cuales el programa permite su uso desde la Capa 2 hasta la que se necesite para el paquete.

\begin{center}
	\includegraphics[scale=.37]{imagenes/Scapy_Init.png}
\end{center}

Iniciando con la Capa 2 esta el comando Ether(), este comando permite modificar los parámetros del enlace de datos, en especial las MACs de destino y origen, en este laboratorio se utiliza en demasía esta capa.

%Imagen de los parametros del comando? - Manuel

El siguiente comando, el cual se encarga de la Capa 3, es IP() el cual se encarga de los parámetros de enrutamiento incluyendo protocolos y direcciones lógicas del sistema, las direcciones de IP de origen y destino.

%Imagen de los parametros del comando? - Manuel

A continuación definimos ICMP(), o Internet Control Message Protocol, el cual es un protocolo como UDP o TCP, el cual se encarga de administrar la informacion relacionada con errores de los equipos en Red, este maneja mensajes de errores y control para los sistemas de la red, informando con ellos a la fuente original para que evite o corrija el problema detectado.

%[...] = alguna forma de continuacion del parrafo anterior
[...] ultimo comando a usar, el cual se encarga de la información a enviar, es Raw() este se tiene un String como parámetro para el envío de información a ser usada por el equipo de destino.
%Imagen de los parametros del comando? - Manuel
\\

Una vez creado las capas a usar, con las capas que se estimen convenientes, estas son apiladas en orden ascendente separadas con un '/' para que estas formen un solo paquete que luego puede ser enviado, para el envío del paquete se utiliza el comando sendp() %el cual hace el envio??? - Manuel

%Agregen mucha mierda! - Manuel

\section{Hardware utilizado}

Para este laboratorio debimos utilizar una red montada con un switch, para esto fue utilizado un Catalyst 2690 fabricado por Cisco System, y una red montada con un hub, siendo este un AdvanceStack Switching Hub-12R fabricado por Hawlett Packard.

\begin{center}
	\includegraphics[scale=.5]{imagenes/Switch/switch.png}
	\includegraphics[scale=.08]{imagenes/Hub/Hub.png}
	\linebreak
\end{center}

Los equipos conectados al switch para realizar las pruebas fueron los equipos del laboratorio de Informatica, mientras que los equipos que fueron utilizados para realizar las pruebas con el hub fueron notebooks.

\newpage


\section{Envío de un paquete de datos a FF:FF:FF:FF:FF:FF}

%escribire en primera persona porque me da paja hacerlo en tercera - Manuel
Creamos el paquete con la dirección MAC 'FF:FF:FF:FF:FF:FF' ...

\begin{center}
	\includegraphics[scale=.37]{imagenes/Switch/Test_1a_b.png}
\end{center}

Al no necesitar ningún parámetro extra en las capas superiores solo las definimos/instanciamos , aunque esto no es necesario para el funcionamiento del paquete (?). Solo modificamos el parámetro de la función Raw() para poder identificar el paquete que nosotros enviamos, una vez hecha la modificación a ese parámetro apilamos el paquete y procedemos el envío de este.

\begin{center}
	\includegraphics[scale=.37]{imagenes/Switch/Test_1b.png}
\end{center}

\subsection{Switch}

Al ser la direccion MAC 'FF:FF:FF:FF:FF:FF' el switch no reenvía el paquete a ningún equipo que se encuentre dentro de la red. Adicionalmente a esto si estamos usando Wireshark en modo Promiscuo podemos capturar el paquete se a enviado.


%No hay imagen de wireshark del experimento 1 ... - Manuel

% Al ser la dirección MAC 'FF:FF:FF:FF:FF:FF' la dirección de Broadcast el paquete es enviado a todos los equipos dentro de la red... %Creo que va en cuestionario esta wea...

%agregar mierda Manuel

\subsection{Hub}

\section{Envío de un paquete de datos con MAC especifica}
\subsection{Switch}

Para este segundo experimento, esta vez usamos la siguiente dirección MAC '18:A9:05:1F:E2:5B' que pertenece a un equipo dentro de la red LAN, al igual que en el experimento anterior no necesitamos usar parámetros adicionales de las capas superiores a excepción de la ultima capa que la usamos para identificar fácilmente nuestro paquete.

\begin{center}
	\includegraphics[scale=.37]{imagenes/Switch/Test_2.png}
\end{center}

Luego buscamos nuestro paquete en Wireshark para ver si se envio correctamente y llego a destino.

\begin{center}
	\includegraphics[scale=.37]{imagenes/Switch/Test_2_Wireshark.png}
\end{center}

\subsection{Hub}

\section{Envió de un paquete de datos con una MAC fuera de la red}
\subsection{Switch}
%la MAC es 78-E4-00-BB-23-23
%después revisen si la mac que aparece en el informe y en la imagen es la misma, si por alguna razón misteriosa del universo o por la gracia del gran unicornio rosa invisible es otra, cambienla  - diego

En esta ocasión se utilizo una dirección MAC de destino escrita al azar que no coincidiera con la de ninguno de los equipos pertenecientes a la red LAN, esta dirección fue ’78:e4:00:bb:23:23’. Luego se creó un paquete tras haber agregado un mensaje en la última capa, sin ningún cambio adicional el paquete fue enviado a la dirección ya mencionada.

En esta ocasión se utilizo una dirección Mac de destino escrita al azar que no coincidiera con la de ninguno de los equipos pertenecientes a la red LAN, esta dirección fue ’78:e4:00:bb:23:23’. Luego se creó un paquete tras haber agregado un mensaje en la última capa, sin ningún cambio adicional el paquete fue enviado a la dirección ya mencionada.

%agregar basura explicatoria, tengo paja y solo agregare las imagenes -Manuel

\begin{center}
	\includegraphics[scale=.37]{imagenes/Switch/Test_3.png}
\end{center}



\begin{center}
	\includegraphics[scale=.37]{imagenes/Switch/Test_3_Wireshark.png}
\end{center}

\newpage


\subsection{Hub}



%Sigo pensando que es mejor que la dejemos en una seccion que consolide las deferencias entre HUB y Switch... - Manuel
% >Agregarlas en las secciones correspondientes -Manuel
%\section{Cuestionario}
%\subsection{¿Qué pasa cuando envió un paquete a la dirección 'FF:FF:FF:FF:FF:FF'?. ¿Quienes lo reciben?. ¿Por qué?}.

%\subsection{¿Qué pasa cuando envió un paquete a una MAC de otro equipo?. ¿Quieres lo pueden reciben?. ¿Por qué?.}

%\subsection{¿Qué sucede si envía un paquete a una MAC que no corresponda a ningún equipo de la red?. ¿Quienes lo pueden recepcionar?. ¿Por qué?.}

\chapter{Conclusión}

%A partir de la creación de paquetes de datos logramos comprender.....

\end{document}
